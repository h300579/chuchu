<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>我们的纪念日</title>

    <style>
      /* 基础样式保持不变 */
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: linear-gradient(135deg, #ffe4f2 0%, #ffcceb 100%);
        overflow: hidden;
        font-family: "Helvetica Neue", Arial, sans-serif;
      }

      /* 光晕、星星、背景层等样式保持不变 */
      .halo-bg {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 0;
        overflow: hidden;
      }
      .halo {
        position: absolute;
        border-radius: 50%;
        filter: blur(100px);
        opacity: 0.3;
        animation: pulse 15s infinite ease-in-out;
      }
      .halo1 {
        width: 800px;
        height: 800px;
        background: #ff9dd2;
        top: -400px;
        left: -200px;
        animation-delay: 0s;
      }
      .halo2 {
        width: 600px;
        height: 600px;
        background: #ffb6e0;
        bottom: -300px;
        right: -100px;
        animation-delay: 3s;
      }
      .halo3 {
        width: 500px;
        height: 500px;
        background: #ffcceb;
        top: 30%;
        right: 20%;
        animation-delay: 6s;
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.3;
        }
        50% {
          transform: scale(1.2);
          opacity: 0.45;
        }
      }
      .star {
        position: absolute;
        color: rgba(255, 255, 255, 0.8);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
        animation: twinkle 4s infinite alternate;
        z-index: 1;
      }
      @keyframes twinkle {
        0% {
          opacity: 0.3;
          transform: scale(0.8);
        }
        100% {
          opacity: 1;
          transform: scale(1.2);
        }
      }
      .bg-layer {
        position: absolute;
        width: 120%;
        height: 120%;
        top: -10%;
        left: -10%;
        z-index: 0;
        pointer-events: none;
        opacity: 0.45;
        animation: bgFloat 18s ease-in-out infinite alternate;
      }
      .bg-layer2 {
        position: absolute;
        width: 140%;
        height: 140%;
        top: -20%;
        left: -20%;
        z-index: 0;
        pointer-events: none;
        opacity: 0.3;
        animation: bgFloat2 26s ease-in-out infinite alternate;
      }
      .bg-layer3 {
        position: absolute;
        width: 150%;
        height: 150%;
        top: -25%;
        left: -25%;
        z-index: 0;
        pointer-events: none;
        opacity: 0.25;
        animation: bgFloat3 32s ease-in-out infinite alternate;
      }
      @keyframes bgFloat {
        0% {
          transform: translate(0, 0) scale(1);
        }
        100% {
          transform: translate(20px, -20px) scale(1.06);
        }
      }
      @keyframes bgFloat2 {
        0% {
          transform: translate(0, 0) scale(1);
        }
        100% {
          transform: translate(-25px, 20px) scale(1.08);
        }
      }
      @keyframes bgFloat3 {
        0% {
          transform: translate(0, 0) scale(1);
        }
        100% {
          transform: translate(30px, 25px) scale(1.1);
        }
      }

      /* 照片墙 - 核心修复：手机端重新布局 */
      .photo-wall {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 2;
        overflow: hidden;
      }

      .photo {
        position: absolute;
        border: 10px solid #fff;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(255, 130, 180, 0.4);
        opacity: 0.85;
        transition: all 0.5s ease;
        animation: gentleShake 6s ease-in-out infinite alternate;
      }
      @keyframes gentleShake {
        0% {
          transform: rotate(-1deg) translateY(0px);
        }
        100% {
          transform: rotate(1deg) translateY(-4px);
        }
      }
      .photo:hover {
        transform: scale(1.05) rotate(0deg) !important;
        z-index: 6;
        opacity: 0.95;
        box-shadow: 0 15px 35px rgba(255, 130, 180, 0.5);
      }

      /* 主照片 */
      .main-photo {
        position: absolute;
        z-index: 7;
        border: 12px solid white;
        border-radius: 14px;
        box-shadow: 0 15px 40px rgba(255, 120, 160, 0.5);
        opacity: 0.97;
        transition: all 0.5s ease;
        animation: floatMain 8s ease-in-out infinite alternate;
      }
      @keyframes floatMain {
        0% {
          transform: translate(-50%, -50%) rotate(-2deg) translateY(0px);
        }
        100% {
          transform: translate(-50%, -50%) rotate(1deg) translateY(-10px);
        }
      }
      .main-photo:hover {
        transform: translate(-50%, -50%) scale(1.03) rotate(0deg) !important;
        box-shadow: 0 20px 50px rgba(255, 120, 160, 0.6);
      }

      /* 内容框 - 提升层级避免被遮挡 */
      .content-box {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255, 255, 255, 0.65);
        padding: 36px 60px;
        border-radius: 20px;
        backdrop-filter: blur(12px);
        text-align: center;
        z-index: 100; /* 核心修复：大幅提升层级，确保在最上层 */
        border: 2px solid rgba(255, 200, 230, 0.8);
        box-shadow: 0 10px 35px rgba(255, 160, 210, 0.5);
        animation: breathGlow 4s ease-in-out infinite,
          floatBox 6s ease-in-out infinite alternate;
      }
      @keyframes floatBox {
        0% {
          transform: translate(-50%, -50%) translateY(0px);
        }
        100% {
          transform: translate(-50%, -50%) translateY(-8px);
        }
      }
      @keyframes breathGlow {
        0% {
          box-shadow: 0 0 25px rgba(255, 150, 200, 0.45),
            0 0 0 2px rgba(255, 255, 255, 0.2);
        }
        50% {
          box-shadow: 0 0 45px rgba(255, 180, 220, 0.75),
            0 0 0 4px rgba(255, 255, 255, 0.3);
        }
        100% {
          box-shadow: 0 0 25px rgba(255, 150, 200, 0.45),
            0 0 0 2px rgba(255, 255, 255, 0.2);
        }
      }

      /* 标题、倒计时、爱心、日期标记样式保持不变 */
      .title {
        font-size: 34px;
        color: #ff6fa8;
        margin-bottom: 20px;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.9);
        position: relative;
        display: inline-block;
      }
      .title::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 10%;
        width: 80%;
        height: 3px;
        background: linear-gradient(90deg, transparent, #ff94c2, transparent);
        border-radius: 3px;
      }
      #countdown {
        font-size: 26px;
        font-weight: bold;
        color: #d93f75;
        padding: 15px 25px;
        background: rgba(255, 240, 245, 0.85);
        border-radius: 12px;
        border: 2px solid rgba(255, 180, 210, 0.9);
        display: inline-block;
        box-shadow: inset 0 2px 5px rgba(255, 255, 255, 0.5);
        margin-top: 10px;
      }
      .floating-heart {
        position: absolute;
        color: #ff7aa5;
        font-size: 20px;
        opacity: 0.8;
        animation: floatUp 6s linear infinite;
        z-index: 20;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
      }
      @keyframes floatUp {
        0% {
          transform: translateY(0) scale(1) rotate(0deg);
          opacity: 0.9;
        }
        100% {
          transform: translateY(-150px) scale(1.6) rotate(30deg);
          opacity: 0;
        }
      }
      .click-heart {
        position: absolute;
        color: #ff5d93;
        font-size: 22px;
        animation: clickFloat 1.2s ease-out forwards;
        pointer-events: none;
        z-index: 99;
        text-shadow: 0 0 15px rgba(255, 100, 150, 0.8);
      }
      @keyframes clickFloat {
        0% {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        50% {
          transform: translateY(-40px) scale(1.5);
          opacity: 0.8;
        }
        100% {
          transform: translateY(-80px) scale(1.8) rotate(30deg);
          opacity: 0;
        }
      }
      .date-marker {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: #ff86b9;
        font-size: 14px;
        padding: 8px 15px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 20px;
        backdrop-filter: blur(5px);
        z-index: 5;
        letter-spacing: 1px;
      }

      /* PC端布局 - 保持原有样式 */
      @media (min-width: 769px) {
        .photo:nth-of-type(1) {
          top: -1vh;
          right: 10vh;
          width: 14%;
          transform: rotate(30deg);
        }
        .photo:nth-of-type(2) {
          top: -20%;
          right: 40%;
          width: 20.3%;
          transform: rotate(30deg);
        }
        .photo:nth-of-type(3) {
          top: -1%;
          left: -1%;
          width: 33.6%;
          transform: rotate(30deg);
        }
        .main-photo {
          /* 核心修复：用top替代bottom，避免负百分比偏移的动态计算误差 */
          top: 70%; /* 从顶部开始，固定在屏幕60%的位置（可微调） */
          left: 50%;
          /* 仅水平居中，垂直方向不额外偏移，避免双重向上叠加 */
          transform: translate(-50%, 0) rotate(-2deg);
          width: 60%;
          z-index: 7;
        }
      }

      /* 手机端布局 - 核心修复：重新定位所有元素，避免重叠 */
      @media (max-width: 768px) {
        html,
        body {
          overflow: hidden;
          height: 100%;
        }

        /* 照片1：右上角 */
        .photo:nth-of-type(1) {
          top: 5%;
          right: 5%;
          width: 25%;
          transform: rotate(15deg);
          z-index: 3;
        }

        /* 照片2：左上角 */
        .photo:nth-of-type(2) {
          top: 20%;
          left: 5%;
          width: 30%;
          transform: rotate(-10deg);
          z-index: 3;
        }

        /* 照片3：左下角 */
        .photo:nth-of-type(3) {
          bottom: 25%;
          left: 8%;
          width: 25%;
          transform: rotate(20deg);
          z-index: 3;
        }

        /* 主照片：底部居中，不遮挡内容框 */
        .main-photo {
          bottom: 5%;
          left: 50%;
          width: 70%;
          transform: translate(-50%, 0) rotate(-2deg);
          border-width: 8px;
          z-index: 4;
        }

        /* 内容框：顶部居中，不被照片遮挡 */
        .content-box {
          padding: 20px 25px;
          width: 70%;
          top: 25%; /* 上移，避免和主照片重叠 */
          z-index: 100; /* 确保在最上层 */
        }

        /* 文字大小适配手机 */
        .title {
          font-size: 20px;
          margin-bottom: 12px;
        }
        #countdown {
          font-size: 16px;
          padding: 8px 12px;
        }

        /* 照片边框缩小 */
        .photo {
          border-width: 6px;
        }

        /* 光晕适配手机 */
        .halo {
          filter: blur(70px);
        }
        .halo1 {
          width: 500px;
          height: 500px;
        }
        .halo2 {
          width: 400px;
          height: 400px;
        }
        .halo3 {
          width: 300px;
          height: 300px;
        }
      }
    </style>
  </head>

  <body>
    <!-- 光晕背景 -->
    <div class="halo-bg">
      <div class="halo halo1"></div>
      <div class="halo halo2"></div>
      <div class="halo halo3"></div>
    </div>

    <!-- 动态星星 -->
    <div id="stars-container"></div>

    <!-- 背景图 -->
    <img src="light1.png" class="bg-layer" />
    <img src="light2.png" class="bg-layer2" />
    <img src="light3.png" class="bg-layer3" />

    <div class="photo-wall">
      <!-- 照片 -->
      <img src="bg3.png" class="photo" />
      <img src="bg1.png" class="photo" />
      <img src="bg2.png" class="photo" />

      <!-- 主照片 -->
      <img src="main.png" class="main-photo" />
    </div>

    <!-- 内容区 -->
    <div class="content-box">
      <div class="title">喵喵 和 初初 已经认识了</div>
      <div id="countdown">Loading...</div>
    </div>

    <!-- 初始日期标记 -->
    <div class="date-marker">始于 2022.11.28</div>

    <script>
      /* 计时、爱心、星星等脚本保持不变 */
      const startDate = new Date(2022, 10, 28);
      function updateCountdown() {
        const now = new Date();
        const diff = now - startDate;
        const days = Math.floor(diff / 86400000);
        const hours = Math.floor((diff / 3600000) % 24);
        const minutes = Math.floor((diff / 60000) % 60);
        const seconds = Math.floor((diff / 1000) % 60);
        document.getElementById(
          "countdown"
        ).innerText = `${days} 天 ${hours} 小时 ${minutes} 分钟 ${seconds} 秒`;
      }
      setInterval(updateCountdown, 1000);
      updateCountdown();

      function createFloatingHeart() {
        const heart = document.createElement("div");
        heart.className = "floating-heart";
        heart.innerText = "❤";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.top = "100vh";
        heart.style.fontSize = 16 + Math.random() * 20 + "px";
        heart.style.animationDuration = 4 + Math.random() * 4 + "s";
        const colors = ["#ff7aa5", "#ff5d93", "#ff94c2", "#ffb6e0"];
        heart.style.color = colors[Math.floor(Math.random() * colors.length)];
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 8000);
      }
      setInterval(createFloatingHeart, 600);

      document.addEventListener("click", function (e) {
        const count = 3 + Math.floor(Math.random() * 3);
        for (let i = 0; i < count; i++) {
          const heart = document.createElement("div");
          heart.className = "click-heart";
          heart.innerText = "❤";
          const offsetX = -20 + Math.random() * 40;
          const offsetY = -20 + Math.random() * 40;
          heart.style.left = e.pageX + offsetX + "px";
          heart.style.top = e.pageY + offsetY + "px";
          heart.style.fontSize = 16 + Math.random() * 15 + "px";
          heart.style.animationDuration = 0.8 + Math.random() * 0.6 + "s";
          const colors = ["#ff5d93", "#ff7aa5", "#ff3b80", "#ff94c2"];
          heart.style.color = colors[Math.floor(Math.random() * colors.length)];
          document.body.appendChild(heart);
          setTimeout(() => heart.remove(), 1200);
        }
      });

      function createStars() {
        const container = document.getElementById("stars-container");
        const count = window.innerWidth < 768 ? 20 : 40;
        for (let i = 0; i < count; i++) {
          const star = document.createElement("div");
          star.className = "star";
          star.innerText = "★";
          star.style.left = Math.random() * 100 + "vw";
          star.style.top = Math.random() * 100 + "vh";
          star.style.fontSize = 8 + Math.random() * 12 + "px";
          star.style.animationDuration = 3 + Math.random() * 5 + "s";
          star.style.animationDelay = Math.random() * 5 + "s";
          container.appendChild(star);
        }
      }
      createStars();

      window.addEventListener("load", function () {
        document.querySelectorAll(".photo, .main-photo").forEach((el) => {
          el.style.opacity = 0;
          el.style.transform = el.style.transform + " scale(0.8)";
          setTimeout(() => {
            el.style.transition = "opacity 1s ease, transform 1s ease";
            el.style.opacity = 0.85;
            el.style.transform = el.style.transform.replace(" scale(0.8)", "");
          }, 300 + Math.random() * 800);
        });
      });
    </script>
  </body>
</html>
