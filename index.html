<!DOCTYPE html>
<html lang="zh">
  <head>
    <link rel="icon" href="favicon.png" type="image/png" />
    <meta charset="UTF-8" />
    <!-- 1. 严格禁止缩放，固定视口行为 -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <!-- 2. 禁用缓存，避免刷新时加载旧资源 -->
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>喵喵 和 初初 已经认识了</title>

    <style>
      /* 3. 全局样式：固定视口尺寸，禁止缩放影响 */
      html {
        touch-action: none; /* 禁止触摸缩放 */
        -ms-text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%; /* 禁止文本自动缩放 */
      }
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        position: relative;
        width: 100vw; /* 固定宽度为视口宽度 */
        height: 100vh; /* 固定高度为视口高度 */
        background: linear-gradient(135deg, #ffe4f2 0%, #ffcceb 100%);
        font-family: "Helvetica Neue", Arial, sans-serif;
      }

      /* 光晕样式 */
      .halo-bg {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 0;
        overflow: hidden;
      }
      .halo {
        position: absolute;
        border-radius: 50%;
        filter: blur(100px);
        opacity: 0.3;
        animation: pulse 15s infinite ease-in-out;
      }
      .halo1 {
        width: 800px;
        height: 800px;
        background: #ff9dd2;
        top: -400px;
        left: -200px;
        animation-delay: 0s;
      }
      .halo2 {
        width: 600px;
        height: 600px;
        background: #ffb6e0;
        bottom: -300px;
        right: -100px;
        animation-delay: 3s;
      }
      .halo3 {
        width: 500px;
        height: 500px;
        background: #ffcceb;
        top: 30%;
        right: 20%;
        animation-delay: 6s;
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.3;
        }
        50% {
          transform: scale(1.2);
          opacity: 0.45;
        }
      }

      /* 星星样式 */
      .star {
        position: absolute;
        color: rgba(255, 255, 255, 0.8);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
        animation: twinkle 4s infinite alternate;
        z-index: 1;
      }
      @keyframes twinkle {
        0% {
          opacity: 0.3;
          transform: scale(0.8);
        }
        100% {
          opacity: 1;
          transform: scale(1.2);
        }
      }

      /* 背景图层 */
      .bg-layer,
      .bg-layer2,
      .bg-layer3 {
        position: absolute;
        pointer-events: none;
        opacity: 0.45;
      }
      .bg-layer {
        width: 120%;
        height: 120%;
        top: -10%;
        left: -10%;
        animation: bgFloat 18s ease-in-out infinite alternate;
      }
      .bg-layer2 {
        width: 140%;
        height: 140%;
        top: -20%;
        left: -20%;
        animation: bgFloat2 26s ease-in-out infinite alternate;
      }
      .bg-layer3 {
        width: 150%;
        height: 150%;
        top: -25%;
        left: -25%;
        animation: bgFloat3 32s ease-in-out infinite alternate;
      }
      @keyframes bgFloat {
        0% {
          transform: translate(0, 0) scale(1);
        }
        100% {
          transform: translate(20px, -20px) scale(1.06);
        }
      }
      @keyframes bgFloat2 {
        0% {
          transform: translate(0, 0) scale(1);
        }
        100% {
          transform: translate(-25px, 20px) scale(1.08);
        }
      }
      @keyframes bgFloat3 {
        0% {
          transform: translate(0, 0) scale(1);
        }
        100% {
          transform: translate(30px, 25px) scale(1.1);
        }
      }

      /* 照片墙样式 */
      .photo-wall {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 2;
        overflow: hidden;
      }
      .photo {
        position: absolute;
        border: 10px solid #fff;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(255, 130, 180, 0.4);
        opacity: 0.85;
        transition: all 0.5s ease;
        animation: gentleShake 6s ease-in-out infinite alternate;
      }
      @keyframes gentleShake {
        0% {
          transform: rotate(-1deg) translateY(0px);
        }
        100% {
          transform: rotate(1deg) translateY(-4px);
        }
      }
      .photo:hover {
        transform: scale(1.05) rotate(0deg) !important;
        z-index: 6;
        opacity: 0.95;
        box-shadow: 0 15px 35px rgba(255, 130, 180, 0.5);
      }

      /* 主照片样式 */
      .main-photo {
        position: absolute;
        z-index: 7;
        border: 12px solid white;
        border-radius: 14px;
        box-shadow: 0 15px 40px rgba(255, 120, 160, 0.5);
        opacity: 0.97;
        transition: all 0.5s ease;
        animation: floatMain 8s ease-in-out infinite alternate;
      }
      @keyframes floatMain {
        0% {
          transform: translate(-50%, -50%) rotate(-2deg) translateY(0px);
        }
        100% {
          transform: translate(-50%, -50%) rotate(1deg) translateY(-10px);
        }
      }
      .main-photo:hover {
        transform: translate(-50%, -50%) scale(1.03) rotate(0deg) !important;
        box-shadow: 0 20px 50px rgba(255, 120, 160, 0.6);
      }

      /* 内容框样式 */
      .content-box {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255, 255, 255, 0.65);
        padding: 36px 60px;
        border-radius: 20px;
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px); /* iOS兼容 */
        text-align: center;
        z-index: 100;
        border: 2px solid rgba(255, 200, 230, 0.8);
        box-shadow: 0 10px 35px rgba(255, 160, 210, 0.5);
        animation: breathGlow 4s ease-in-out infinite,
          floatBox 6s ease-in-out infinite alternate;
      }
      @keyframes floatBox {
        0% {
          transform: translate(-50%, -50%) translateY(0px);
        }
        100% {
          transform: translate(-50%, -50%) translateY(-8px);
        }
      }
      @keyframes breathGlow {
        0% {
          box-shadow: 0 0 25px rgba(255, 150, 200, 0.45),
            0 0 0 2px rgba(255, 255, 255, 0.2);
        }
        50% {
          box-shadow: 0 0 45px rgba(255, 180, 220, 0.75),
            0 0 0 4px rgba(255, 255, 255, 0.3);
        }
        100% {
          box-shadow: 0 0 25px rgba(255, 150, 200, 0.45),
            0 0 0 2px rgba(255, 255, 255, 0.2);
        }
      }

      /* 文字样式 */
      .title {
        font-size: 34px;
        color: #ff6fa8;
        margin-bottom: 20px;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.9);
        position: relative;
        display: inline-block;
      }
      .title::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 10%;
        width: 80%;
        height: 3px;
        background: linear-gradient(90deg, transparent, #ff94c2, transparent);
        border-radius: 3px;
      }
      #countdown {
        font-size: 26px;
        font-weight: bold;
        color: #d93f75;
        padding: 15px 25px;
        background: rgba(255, 240, 245, 0.85);
        border-radius: 12px;
        border: 2px solid rgba(255, 180, 210, 0.9);
        display: inline-block;
        box-shadow: inset 0 2px 5px rgba(255, 255, 255, 0.5);
        margin-top: 10px;
      }

      /* 浮动爱心 */
      .floating-heart {
        position: absolute;
        color: #ff7aa5;
        font-size: 20px;
        opacity: 0.8;
        animation: floatUp 6s linear infinite;
        z-index: 20;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
      }
      @keyframes floatUp {
        0% {
          transform: translateY(0) scale(1) rotate(0deg);
          opacity: 0.9;
        }
        100% {
          transform: translateY(-150px) scale(1.6) rotate(30deg);
          opacity: 0;
        }
      }
      .click-heart {
        position: absolute;
        color: #ff5d93;
        font-size: 22px;
        animation: clickFloat 1.2s ease-out forwards;
        pointer-events: none;
        z-index: 99;
        text-shadow: 0 0 15px rgba(255, 100, 150, 0.8);
      }
      @keyframes clickFloat {
        0% {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        50% {
          transform: translateY(-40px) scale(1.5);
          opacity: 0.8;
        }
        100% {
          transform: translateY(-80px) scale(1.8) rotate(30deg);
          opacity: 0;
        }
      }

      /* 底部日期 */
      .date-marker {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: #ff86b9;
        font-size: 14px;
        padding: 8px 15px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 20px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px); /* iOS兼容 */
        z-index: 5;
        letter-spacing: 1px;
      }

      /* 4. 响应式布局：用vw单位适配视口，避免缩放错乱 */
      @media (max-width: 768px) {
        .photo:nth-of-type(1) {
          top: 8vh; /* 用视口高度定位 */
          right: 4vw; /* 用视口宽度定位 */
          width: 22vw; /* 用视口宽度定尺寸 */
          transform: rotate(12deg);
          z-index: 3;
        }
        .photo:nth-of-type(2) {
          top: 22vh;
          left: 4vw;
          width: 28vw;
          transform: rotate(-8deg);
          z-index: 3;
        }
        .photo:nth-of-type(3) {
          bottom: 30vh;
          left: 6vw;
          width: 22vw;
          transform: rotate(18deg);
          z-index: 3;
        }
        .main-photo {
          bottom: 8vh;
          left: 50%;
          width: 65vw;
          transform: translate(-50%, 0) rotate(-1.5deg);
          border-width: 6px;
          z-index: 4;
        }
        .content-box {
          padding: 16px 18px;
          width: 90vw;
          top: 23vh;
          z-index: 100;
        }
        .title {
          font-size: 19px;
          margin-bottom: 10px;
        }
        #countdown {
          font-size: 15px;
          padding: 7px 10px;
          width: 95%;
          word-break: keep-all;
        }
        .halo {
          filter: blur(60px);
        }
        .halo1 {
          width: 450px;
          height: 450px;
        }
        .halo2 {
          width: 350px;
          height: 350px;
        }
        .halo3 {
          width: 280px;
          height: 280px;
        }
      }

      @media (min-width: 769px) {
        .photo:nth-of-type(1) {
          top: -1vh;
          right: 10vw;
          width: 14vw;
          transform: rotate(30deg);
        }
        .photo:nth-of-type(2) {
          top: -20vh;
          right: 40vw;
          width: 20.3vw;
          transform: rotate(30deg);
        }
        .photo:nth-of-type(3) {
          top: -1vh;
          left: -1vw;
          width: 33.6vw;
          transform: rotate(30deg);
        }
        .main-photo {
          top: 70vh;
          left: 50%;
          width: 60vw;
          transform: translate(-50%, 0) rotate(-2deg);
          z-index: 7;
        }
      }
    </style>
  </head>

  <body>
    <div class="halo-bg">
      <div class="halo halo1"></div>
      <div class="halo halo2"></div>
      <div class="halo halo3"></div>
    </div>

    <div id="stars-container"></div>

    <img src="light1.png" class="bg-layer" />
    <img src="light2.png" class="bg-layer2" />
    <img src="light3.png" class="bg-layer3" />

    <div class="photo-wall">
      <img src="bg3.png" class="photo" />
      <img src="bg1.png" class="photo" />
      <img src="bg2.png" class="photo" />
      <img src="main.png" class="main-photo" />
    </div>

    <div class="content-box">
      <div class="title">喵喵 和 初初 已经认识了</div>
      <div id="countdown">Loading...</div>
    </div>

    <div class="date-marker">始于 2022.11.28</div>

    <script>
      // 5. 日期倒计时逻辑
      const startDate = new Date(2022, 10, 28); // 起始日期（11月28日）
      function updateCountdown() {
        const now = new Date();
        const diff = now - startDate;
        const days = Math.floor(diff / 86400000);
        const hours = Math.floor((diff % 86400000) / 3600000);
        const minutes = Math.floor((diff % 3600000) / 60000);
        const seconds = Math.floor((diff % 60000) / 1000);
        document.getElementById(
          "countdown"
        ).innerText = `${days}天 ${hours}小时 ${minutes}分钟 ${seconds}秒`;
      }
      setInterval(updateCountdown, 1000);
      updateCountdown(); // 初始化

      // 6. 浮动爱心逻辑
      function createFloatingHeart() {
        const heart = document.createElement("div");
        heart.className = "floating-heart";
        heart.innerText = "❤";
        // 随机位置（基于视口尺寸）
        heart.style.left = `${Math.random() * 100}vw`;
        heart.style.animationDuration = `${4 + Math.random() * 4}s`;
        document.body.appendChild(heart);
        // 移除过期爱心
        setTimeout(() => heart.remove(), 8000);
      }
      setInterval(createFloatingHeart, 600);

      // 7. 点击爱心效果
      document.addEventListener("click", (e) => {
        const heart = document.createElement("div");
        heart.className = "click-heart";
        heart.innerText = "❤";
        heart.style.left = `${e.clientX}px`;
        heart.style.top = `${e.clientY}px`;
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 1200);
      });

      // 8. 生成星星
      function createStars() {
        const container = document.getElementById("stars-container");
        const count = window.innerWidth < 768 ? 20 : 40;
        for (let i = 0; i < count; i++) {
          const star = document.createElement("div");
          star.className = "star";
          star.innerText = "★";
          star.style.left = `${Math.random() * 100}vw`;
          star.style.top = `${Math.random() * 100}vh`;
          star.style.fontSize = `${8 + Math.random() * 12}px`;
          star.style.animationDuration = `${3 + Math.random() * 5}s`;
          container.appendChild(star);
        }
      }
      createStars();

      // 9. 核心修复：刷新/缩放时重置页面状态
      function resetPage() {
        // 重置图片样式（避免透明/错位）
        document.querySelectorAll(".photo, .main-photo").forEach((el) => {
          el.style.opacity = "0.85";
          el.style.transform = el.style.transform.replace(" scale(0.8)", "");
        });
        // 重新计算布局（应对缩放）
        document.body.style.width = `${window.innerWidth}px`;
        document.body.style.height = `${window.innerHeight}px`;
      }
      // 监听刷新和缩放事件，强制重置
      window.addEventListener("load", resetPage);
      window.addEventListener("resize", resetPage);
    </script>
  </body>
</html>
